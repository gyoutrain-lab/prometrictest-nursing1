<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nursing Prometric Simulation Test</title>
<style>
body, html { margin:0; padding:0; font-family:Arial,sans-serif; background:#eef5f5; }
.container { max-width:900px; margin:auto; padding:24px; }
h2{text-align:center; color:#003366; font-size:3rem; margin-bottom:20px;}
h2 small{font-size:1.5rem; display:block; margin-top:5px; color:#444;}
input.unlock-code { padding:10px; width:200px; margin-right:10px; border-radius:5px; border:1px solid #ccc; font-size:1rem; }
button { padding:10px 20px; border:none; border-radius:5px; cursor:pointer; background:#28a745; color:#fff; font-size:1rem; }
button:disabled { background:#ccc; cursor:not-allowed; }
.notification { position:fixed; top:10px; left:50%; transform:translateX(-50%); padding:15px 20px; background-color:#007bff; color:#fff; border-radius:8px; display:none; z-index:9999; }
footer { text-align:center; font-size:0.9rem; color:red; margin-top:20px; }
</style>
</head>
<body>

<div class="container">
  <h2>ðŸ©º (All in One) Nursing Prometric Simulation Test<br><small>Adapted from Prometric/SMLE and NCLEX materials</small></h2>

  <div>
    <input type="text" id="unlockCodeInput" class="unlock-code" placeholder="Enter unlock code">
    <button id="continueBtn" onclick="checkUnlockCode()" disabled>Continue to Test</button>
  </div>

  <div class="notification" id="notificationBox"></div>

  <footer>
    Prepared by: <b>Giyono Asfarrasyid, ETK Yogyakarta</b>
  </footer>
</div>

<script>
// Replace this with the code your admin gives you from the sheet
let unlockCode = ""; 
let approved = false;

// Simulate checking the code from backend
function checkUnlockCode(){
  const codeInput = document.getElementById("unlockCodeInput").value.trim().toUpperCase();
  if(!codeInput){ showNotification("Enter unlock code."); return; }
  if(!approved){ showNotification("Admin approval required."); return; }
  if(codeInput === unlockCode){
    showNotification("Unlock valid! Redirecting...", "#28a745");
    setTimeout(()=>{ 
      window.location.href = "https://script.google.com/macros/s/AKfycbwYfVBD3Lb7uIzGynRnnXJYJSwe5FdCqg1DcCxuMDm6C6WToz_gxmWWacEZFv1arwUG/exec";
    }, 800);
  } else {
    showNotification("Invalid unlock code.", "#cc0000");
  }
}

// Notification helper
function showNotification(msg, color="#007bff"){
  const box = document.getElementById("notificationBox");
  box.style.backgroundColor = color;
  box.innerText = msg;
  box.style.display = "block";
  setTimeout(()=>{ box.style.display = "none"; }, 3000);
}

// Mock fetching unlock code from sheet: ADMIN sets this manually
// Example: after payment, set unlockCode and enable button
function setUnlockCodeFromAdmin(code){
  unlockCode = code.toUpperCase();
  approved = true;
  document.getElementById("continueBtn").disabled = false;
  showNotification("Payment approved. Enter unlock code.", "#28a745");
}

// ---- Example: admin sets code here ----
setUnlockCodeFromAdmin("XO5U2T"); // replace with actual unlock code from sheet
</script>

</body>
</html>
